$(function(){function e(){function e(){t(r+1)}function t(e){i[r].className=".hotel-slider cover",r=(e+i.length)%i.length,i[r].className=".hotel-slider cover showing"}function n(){s.style.background="rgba(6,154,12,.4)",a=!1,clearInterval(o)}if(0==$(".hotel-slider").length)return!1;document.querySelectorAll(".hotel-slider .buttons > .btn");var i=document.querySelectorAll(".hotel-slider > .slides > .cover"),r=0,o=setInterval(e,5e3),a=!0,s=document.querySelector(".hotel-slider .buttons > .pause");s.onclick=function(){a?n():(s.style.background="rgba(0,0,0,.7)",a=!0,o=setInterval(e,5e3))};var l=document.querySelector(".hotel-slider .buttons .next"),c=document.querySelector(".hotel-slider .buttons .prev");l.onclick=function(){n(),e()},c.onclick=function(){n(),t(r-1)}}window.onload=void window.addEventListener("scroll",function(e){var t=window.pageYOffset||document.documentElement.scrollTop,n=document.querySelector("header > nav");t>500?classie.add(n,"smaller"):classie.has(n,"smaller")&&classie.remove(n,"smaller")}),$("#intro > .intro-poster > .links > a").click(function(e){e.preventDefault(),$("#intro .circle").css("animation","puls forwards 2s");var t=this.getAttribute("href");setTimeout(function(){window.location=t},1e3)}),$(".hamburger").click(function(){$(".hamburger .inner").toggleClass("open"),$("nav > .menu > ul").toggleClass("closed")}),$(".actual .container .main .wrapper .element").click(function(){$(this).addClass("move")}),$(".actual .container .main .wrapper .element").mouseleave(function(){$(this).removeClass("move")}),$(window).bind("scroll",function(e){!function(){var e=$(window).scrollTop();$(".poster-sub .cover").css("background-position","center +"+.5*e+"px"),$(".poster .cover").css("background-position","center +"+.5*e+"px")}()}),function(e){var t=!1,n=function(){var e=$("body").prop("scrollTop"),t=$("html").prop("scrollTop");return 0===t?e:t},i=e.clone(!0).appendTo(e.parent()).hide().css({position:"fixed",top:0,right:0,transition:"all .3s"});e.on({show:function(e){i.show(),t=!0},hide:function(e){i.hide(),t=!1},check:function(i){n()>e.offset().top&&!t&&window.innerWidth>=1440?e.triggerHandler("show"):n()<=e.offset().top&&t&&e.triggerHandler("hide")}}),$(window).scroll(function(){e.triggerHandler("check")}),$(window).resize(function(){window.innerWidth<1440&&t&&e.triggerHandler("hide")}),$(document).scroll(function(){})}($(".breadcrumbs .social")),$(window).scroll(function(){window.innerWidth<1440&&($(this).scrollTop()>300?$(".nav-end").fadeIn().css("display","flex"):$(".nav-end").fadeOut())});var t=$(".tab-wrapper"),n=t.find(".tab-content > div"),i=t.find(".tab-menu li"),r=$('<div class="line"></div>').appendTo(i);n.not(":first-of-type").hide(),i.filter(":first-of-type").find(":first").width("100%"),i.each(function(e){$(this).attr("data-tab","tab"+e)}),n.each(function(e){$(this).attr("data-tab","tab"+e)}),i.on("click",function(){var e=$(this).data("tab"),o=$(this).closest(t);o.find(i).removeClass("active"),$(this).addClass("active"),o.find(".line").width(0),$(this).find(r).animate({width:"100%"},"fast"),o.find(n).hide(),o.find(n).filter("[data-tab="+e+"]").show()}),function(e,t,n){var i,r=0,o=!1;e.on({init:function(e){TweenLite.set(t.eq(0),{opacity:1}),TweenLite.set(t.eq(0).siblings(".slide"),{opacity:0}),$(this).triggerHandler("start")},next:function(e){o||(o=!0,r++,$(this).triggerHandler("set"))},prev:function(e){o||(o=!0,r--,$(this).triggerHandler("set"))},set:function(e){$(this);r<0&&(r=t.length-1),r%=t.length,n.eq(r).addClass("active").siblings(".item").removeClass("active"),new TimelineLite({onComplete:function(){o=!1}}).add(TweenLite.to(t.eq(r).siblings(".slide"),1,{opacity:0}),0).add(TweenLite.to(t.eq(r),1,{opacity:1}),0)},stop:function(e){window.clearInterval(i)},start:function(e){var t=$(this);t.triggerHandler("stop"),i=window.setInterval(function(){t.triggerHandler("next")},4e3)},mouseenter:function(e){$(this).triggerHandler("stop")},mouseleave:function(e){$(this).triggerHandler("start")}}).swipe({swipeLeft:function(e){$(this).triggerHandler("next")},swipeRight:function(e){$(this).triggerHandler("prev")}}),n.click(function(t){o||(o=!0,r=$(this).index(),e.triggerHandler("set"))}),e.triggerHandler("init")}($("#slider-main"),$("#slider-main > .slide"),$("#slider-main > .pagin > .item")),e(),function(e,t,n){e.on({check:function(t,n){var i=function(e){var t=$(e).attr("value-type"),n=$(e).val();switch(t){case"person":return/^\D[\D\s \-]+$/.test(n);case"subject":case"message":return/^[^<>]+$/.test(n);case"email":return/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$/.test(n);case"phone":return/^(\+\d+\s*)?(\(\d+\)\s*)?(\d+(\s|\-)*)+$/.test(n);default:return!1}}(n);return e.triggerHandler("mark",[n,i]),i},mark:function(e,t,n){!0===n?($(t).removeClass("invalid"),$(t).addClass("valid")):($(t).removeClass("valid"),$(t).addClass("invalid"))},send:function(t){var n=new FormData(e[0]);$.ajax({method:"POST",url:"../../ajax-kontakt/",data:n,contentType:!1,processData:!1,success:function(t,n,i){try{console.log(t);var r=JSON.parse(t);e.triggerHandler("notify",[r.status,r.msg])}catch(t){console.error(t),e.triggerHandler("notify",["error","Błąd odpowiedzi serwera."])}},error:function(t,n,i){console.error({xhr:t,status:n,data:i}),e.triggerHandler("notify",["error","Błąd komunikacji z serwerem."])}})},notify:function(e,t,n){}}),t.blur(function(t){e.triggerHandler("check",$(this))}),n.click(function(n){n.preventDefault(),t.each(function(){e.triggerHandler("check",$(this))}),console.log(t.filter(".valid").length===t.length),t.filter(".valid").length===t.length?(console.info("formularz zweryfikowany pomyślnie"),e.triggerHandler("send")):console.warn("formularz nie został wypełniony poprawnie")})}($("form.fpcf"),$("form.fpcf").find("input, textarea"),$("form.fpcf .submit"))});